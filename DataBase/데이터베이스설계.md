# 데이터베이스 설계

- ### 데이터베이스 설계
    - 사용자의 다양한 요구 사항을 고려하여 데이터베이스를 생성하는 과정
    
- ### 관계 데이터베이스의 대표적인 설계 방법
    - `E-R 모델`과 릴레이션 변환 규칙을 이용한 설계
    ![스크린샷 2020-11-23 오후 2 42 04](https://user-images.githubusercontent.com/45676906/99932029-18d8b180-2d9a-11eb-8b76-86174fa199f9.png)
    
    
- ### E-R 모델과 릴레이션 변환 규칙을 이용한 설계의 과정

![스크린샷 2020-11-23 오후 2 43 30](https://user-images.githubusercontent.com/45676906/99932072-432a6f00-2d9a-11eb-9091-ba344f610a64.png)

<br>

## `요구 사항 분석`

- ### 설계 1단계: 요구 사항 분석
    - 사용자의 요구 사항을 수집하고 분석하여 개발할 데이터베이스의 용도를 파악
    - 업무에 필요한 데이터가 무엇인지, 그 데이터에 어떤 처리가 필요한지 등을 고려
    - 개발하기 전에 기획안을 보고 기획자 - 개발자의 소통하는 단계라고 생각하면 될 것 같다.
    - ### 요구 사항 분석 예 - `마트 데이터베이스`
        ![스크린샷 2020-11-23 오후 2 46 19](https://user-images.githubusercontent.com/45676906/99932176-a7e5c980-2d9a-11eb-9685-2386908b5279.png)
        
위의 요구 사항을 보고서 어떤 테이블이 필요하고 테이블 안에 어떤 컬럼이 필요하며(PK는 무엇인지 등), 테이블의 관계는 어떻게 되며(FK는 어떻게 되는지 등을 생각할 수 있다.)

<br>

## `개념적 설계`

- ### 설계 2단계: 개념적 설계
    - DBMS에 독립적인 개념적 스키마 설계 (`개념적 스키마: E-R 다이어그램`)
    - 요구사항 분석결과를 기반으로 중요한 개체를 추출하고 개체간의 관계를 결정하여 `E-R 다이어그램`으로 표현
    - ### 작업 과정
        - STEP 1) `개체 추출, 각 개체의 주요 속성과 키 속성` 찾기
        - STEP 2) `개체 간의 관계` 결정
        - STEP 3) `E-R 다이어그램`으로 표현
        ![스크린샷 2020-11-23 오후 2 57 45](https://user-images.githubusercontent.com/45676906/99932710-40307e00-2d9c-11eb-91c4-1787b53ff04f.png)
    
    - ### (STEP 1) - 개체와 속성 추출    
        - 개체: 저장할 만한 가치가 있는 중요 데이터를 가진 사람이나 사물 등을 의미한다.
            - 병원이라면 `환저, 의사, 간호사, 수술실, 의료 장비` 등이 있다.
        - 개체 추출 방법
            - 요구 사항 문장에서 업무와 관련이 깊은 의미 있는 `명사`를 최우선으로 찾아보자.
            - 업무와 관련이 적은 일반적이고 광범위한 의미의 명사는 제외
           
       ![스크린샷 2020-11-23 오후 3 03 27](https://user-images.githubusercontent.com/45676906/99932989-0ca22380-2d9d-11eb-8d22-189813aacc14.png)
        
       - 7번: `회원`이 `상품`을 주문하면 주문에 대한 `주문 번호, 주문수량, 배송지, 주문일자` 정보를 유지해야 한다.
            - 개체: `회원, 상품`
            - 속성: 주문번호, 주문수량, 배송지, 주문일자
                - 회원이 상품을 주문을 해야 생기는 중요한 정보이기 때문에 회원이나 상품 개체의 속성으로 보기는 어렵고 이후 추출할 특정 관계의 속성으로 봐야할 것 같다.
                
       ![스크린샷 2020-11-23 오후 3 08 37](https://user-images.githubusercontent.com/45676906/99933232-c4cfcc00-2d9d-11eb-9ffa-2897395d9a30.png)
       ![스크린샷 2020-11-23 오후 3 09 43](https://user-images.githubusercontent.com/45676906/99933281-eb8e0280-2d9d-11eb-814d-35b60fa42def.png)

   - ### (STEP 2) - 관계 추출
        - 관계: 개체 간의 관계를 찾기
            - 찾아낸 관계에 대해 매핑 카디널리티와 참여 특성을 결정하자.
                - `일대일(1:1), 일대다(1:n), 다대다(n:m)`
                - 참여 특성: 필수적 참여 / 선택적 참여
                
        - 6번: `회원`은 여러 상품을 주문할 수 있고, 하나의 상품을 여러 회원이 주문할 수 있다.
        - 7번: `회원`이 `상품`을 주문하면 주문에 대한 `주문 번호, 주문수량, 배송지, 주문일자` 정보를 유지해야 한다.              
            - ### 관계: 주문 (속성: 주문번호, 주문수량, 배송지, 주문일자)
                - `회원` 개체와 `상품` 개체가 맺는 관계는 `다대다(n:m) 관계`
                - `회원` 개체는 관계에 `선택적`으로 참여 / `상품` 개체는 관계에 `선택적`으로 참여       
           
        - 8번: 각 상품은 한 제조업체가 공급하고, 제조업체 하나는 여러 상품을 공급할 수 있다.
        - 9번: 제조업체가 상품을 공급하면 공급일자와 공급량 정볼르 유지해야 한다.
            - ### 관계: 공급(공급일자, 공급량)
                - `상품` 개체와 `제조업체` 개체가 맺는 관계는 `일대다(1:n) 관계`
                - `상품` 개체는 관계에 `필수적`으로 참여(제조되지 않으면 상품이 존재하지 않기 때문) / `제조업체` 개체는 관계에 `선택적`으로 참여
    
        - 12번: 회원은 게시글을 여러 개 작성할 수 있고, 게시글 하나는 한 명의 회원만 작성할 수 있다.
            - ### 관계: 작성
                - `회원` 개체와 `게시글` 개체가 맺는 관계는 `일대다(1:n) 관계`
                - `회원` 개체는 관계에 `선택적`으로 참여 / `게시글` 개체는 관계에 `필수적`으로 참여

- ### `회원 - 상품` 관계

![스크린샷 2020-11-23 오후 3 28 22](https://user-images.githubusercontent.com/45676906/99934149-8687dc00-2da0-11eb-83a8-f25b48c1ba4d.png)

<br>

- ### `상품 - 제조업체` 관계

![스크린샷 2020-11-23 오후 3 28 58](https://user-images.githubusercontent.com/45676906/99934181-9d2e3300-2da0-11eb-8995-80da11252e5c.png)

<br>

- ### `회원 - 게시글` 관계

![스크린샷 2020-11-23 오후 3 29 31](https://user-images.githubusercontent.com/45676906/99934209-afa86c80-2da0-11eb-81c4-7b9908e57708.png)

<br>

- ###  3개의 E-R 모델 합치기

![스크린샷 2020-11-23 오후 3 30 09](https://user-images.githubusercontent.com/45676906/99934236-c77ff080-2da0-11eb-88e6-006e314e71d1.png)

